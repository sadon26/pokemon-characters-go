import{p as e,a,v as F,w as U}from"./chunk-4WY6JWTD-C6HYQV7D.js";import{u as I,l as A}from"./LocalStore-CoLjZkaN.js";import{u as S,a as H}from"./useUpdatePokemons-CqyFS8qT.js";import{P as W,a as B,B as R,R as T,H as K}from"./HomeLayout-Bz9pfbTZ.js";import"./index-DcSJJRlm.js";import{M as O,i as Z,u as z,P as _,a as X,b as q,L as J,m as Q}from"./proxy-ChNXyaPz.js";const G="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%201024%201024'%20class='icon'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M511.891456%20928.549888c229.548032%200%20415.634432-186.0864%20415.634432-415.634432C927.525888%20283.3664%20741.439488%2097.28%20511.890432%2097.28%20282.343424%2097.28%2096.258048%20283.3664%2096.258048%20512.915456c0%20229.548032%20186.084352%20415.634432%20415.634432%20415.634432'%20fill='%23FFF200'%20/%3e%3cpath%20d='M436.571136%20707.376128l330.3936-330.3936c5.506048-5.507072%208.571904-12.803072%208.633344-20.544512%200.060416-7.85408-2.961408-15.235072-8.511488-20.784128%200.001024-0.012288-0.001024-0.002048-0.001024-0.002048l-0.001024-0.001024c-5.410816-5.409792-12.978176-8.489984-20.687872-8.460288-7.810048%200.032768-15.13984%203.081216-20.640768%208.58112l-309.11488%20309.116928-94.99648-94.998528c-5.501952-5.501952-12.833792-8.5504-20.642816-8.58112h-0.115712c-7.69536%200-15.186944%203.08224-20.569088%208.465408-11.360256%2011.36128-11.307008%2029.899776%200.118784%2041.325568l109.924352%20109.924352a29.017088%2029.017088%200%200%200%204.883456%206.474752c5.658624%205.6576%2013.095936%208.482816%2020.550656%208.481792a29.31712%2029.31712%200%200%200%2020.77696-8.604672M511.891456%2097.28C282.3424%2097.28%2096.256%20283.3664%2096.256%20512.915456s186.0864%20415.634432%20415.635456%20415.634432c229.548032%200%20415.634432-186.085376%20415.634432-415.634432C927.525888%20283.365376%20741.439488%2097.28%20511.891456%2097.28m0%2040.96c50.597888%200%2099.661824%209.901056%20145.82784%2029.427712%2044.61056%2018.868224%2084.683776%2045.889536%20119.10656%2080.31232%2034.422784%2034.422784%2061.444096%2074.496%2080.313344%20119.107584%2019.525632%2046.164992%2029.426688%2095.228928%2029.426688%20145.82784s-9.901056%2099.662848-29.426688%20145.82784c-18.869248%2044.61056-45.89056%2084.6848-80.313344%20119.107584s-74.496%2061.443072-119.10656%2080.31232c-46.166016%2019.526656-95.229952%2029.426688-145.82784%2029.426688-50.598912%200-99.662848-9.900032-145.828864-29.426688-44.61056-18.869248-84.683776-45.889536-119.10656-80.31232-34.422784-34.422784-61.444096-74.497024-80.313344-119.107584C147.117056%20612.57728%20137.216%20563.514368%20137.216%20512.915456s9.901056-99.662848%2029.426688-145.82784c18.869248-44.611584%2045.89056-84.6848%2080.313344-119.107584s74.496-61.444096%20119.10656-80.31232C412.228608%20148.140032%20461.292544%20138.24%20511.891456%20138.24'%20fill='%23000000'%20/%3e%3c/svg%3e",Y=()=>e.jsx("div",{id:"intro-screen","data-testid":"intro-screen",className:"fixed inset-0 flex items-center justify-center bg-black intro-fade",children:e.jsx("div",{className:"w-48 h-48 pokeball-intro",children:e.jsx("img",{src:W,alt:"Pokeball Intro",className:"w-full h-full drop-shadow-2xl"})})});function M(s,o){if(typeof s=="function")return s(o);s!=null&&(s.current=o)}function ee(...s){return o=>{let n=!1;const r=s.map(i=>{const t=M(i,o);return!n&&typeof t=="function"&&(n=!0),t});if(n)return()=>{for(let i=0;i<r.length;i++){const t=r[i];typeof t=="function"?t():M(s[i],null)}}}}function te(...s){return a.useCallback(ee(...s),s)}class se extends a.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Z(r)&&r.offsetWidth||0,t=this.props.sizeRef.current;t.height=n.offsetHeight||0,t.width=n.offsetWidth||0,t.top=n.offsetTop,t.left=n.offsetLeft,t.right=i-t.width-t.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ne({children:s,isPresent:o,anchorX:n,root:r}){const i=a.useId(),t=a.useRef(null),d=a.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=a.useContext(O),j=te(t,s?.ref);return a.useInsertionEffect(()=>{const{width:c,height:p,top:l,left:h,right:x}=d.current;if(o||!t.current||!c||!p)return;const b=n==="left"?`left: ${h}`:`right: ${x}`;t.current.dataset.motionPopId=i;const m=document.createElement("style");f&&(m.nonce=f);const P=r??document.head;return P.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${p}px !important;
            ${b}px !important;
            top: ${l}px !important;
          }
        `),()=>{P.contains(m)&&P.removeChild(m)}},[o]),e.jsx(se,{isPresent:o,childRef:t,sizeRef:d,children:a.cloneElement(s,{ref:j})})}const oe=({children:s,initial:o,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:t,mode:d,anchorX:f,root:j})=>{const c=z(re),p=a.useId();let l=!0,h=a.useMemo(()=>(l=!1,{id:p,initial:o,isPresent:n,custom:i,onExitComplete:x=>{c.set(x,!0);for(const b of c.values())if(!b)return;r&&r()},register:x=>(c.set(x,!1),()=>c.delete(x))}),[n,c,r]);return t&&l&&(h={...h}),a.useMemo(()=>{c.forEach((x,b)=>c.set(b,!1))},[n]),a.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),d==="popLayout"&&(s=e.jsx(ne,{isPresent:n,anchorX:f,root:j,children:s})),e.jsx(_.Provider,{value:h,children:s})};function re(){return new Map}const y=s=>s.key||"";function E(s){const o=[];return a.Children.forEach(s,n=>{a.isValidElement(n)&&o.push(n)}),o}const ie=({children:s,custom:o,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:t="sync",propagate:d=!1,anchorX:f="left",root:j})=>{const[c,p]=X(d),l=a.useMemo(()=>E(s),[s]),h=d&&!c?[]:l.map(y),x=a.useRef(!0),b=a.useRef(l),m=z(()=>new Map),[P,V]=a.useState(l),[C,k]=a.useState(l);q(()=>{x.current=!1,b.current=l;for(let g=0;g<C.length;g++){const u=y(C[g]);h.includes(u)?m.delete(u):m.get(u)!==!0&&m.set(u,!1)}},[C,h.length,h.join("-")]);const v=[];if(l!==P){let g=[...l];for(let u=0;u<C.length;u++){const w=C[u],N=y(w);h.includes(N)||(g.splice(u,0,w),v.push(w))}return t==="wait"&&v.length&&(g=v),k(E(g)),V(l),null}const{forceRender:$}=a.useContext(J);return e.jsx(e.Fragment,{children:C.map(g=>{const u=y(g),w=d&&!c?!1:l===C||h.includes(u),N=()=>{if(m.has(u))m.set(u,!0);else return;let L=!0;m.forEach(D=>{D||(L=!1)}),L&&($?.(),k(b.current),d&&p?.(),r&&r())};return e.jsx(oe,{isPresent:w,initial:!x.current||n?void 0:!1,custom:o,presenceAffectsLayout:i,mode:t,root:j,onExitComplete:w?void 0:N,anchorX:f,children:g},u)})})},ae=({pokemons:s,params:o,onPaginate:n})=>{const[r]=I(),i=F(),t=async f=>{const j=f.url.split("/").at(-2);i(B(j))},d=f=>{n(f)};return e.jsx(e.Fragment,{children:e.jsx(ie,{mode:"wait",children:e.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.view==="grid"?e.jsx(ce,{pokemons:s,viewPokemon:t,params:o,handlePageClick:d}):e.jsx(le,{pokemons:s,viewPokemon:t,params:o,handlePageClick:d})},r?.view)})})},le=({pokemons:s,viewPokemon:o,params:n,handlePageClick:r})=>{const{hasCaughtPokemon:i}=S();return e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full table-auto border-collapse border border-slate-300 mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:"Name"}),e.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:"URL"}),e.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:"Caught Pokémons"}),e.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:s?.results?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-300 px-4 py-2 text-sm capitalize",children:t.name}),e.jsx("td",{className:"border border-slate-300 px-4 py-2 text-sm",children:t.url}),e.jsx("td",{className:"border border-slate-300 px-4 py-2",children:i(t)&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center pointer-events-none",children:[e.jsx("span",{className:"text-xs",children:"Caught"}),e.jsx("div",{className:"w-6 h-6 bg-white/90 rounded-full p-1 shadow-sm",children:e.jsx("img",{src:G,alt:"tick-icon"})})]})})}),e.jsx("td",{className:"flex justify-between border border-slate-300 px-4 py-2",children:e.jsx(R,{className:"!py-1 !px-2 !text-xs !h-8 rounded-lg border text-sm",onClick:()=>o(t),children:"View"})})]},t.name))})]}),s?.count>n?.limit&&e.jsx(T,{className:"react-paginate",forcePage:n?.offset/n?.limit,breakLabel:"...",onPageChange:r,pageRangeDisplayed:3,previousLabel:"←",nextLabel:"→",pageCount:Math.ceil(s?.count/n?.limit)??0,renderOnZeroPageCount:null})]})},ce=({pokemons:s,viewPokemon:o,params:n,handlePageClick:r})=>{const{hasCaughtPokemon:i}=S();return e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:s?.results?.map(t=>e.jsxs("div",{className:"border border-slate-300 rounded-lg p-4 flex flex-col justify-between items-center hover:shadow-lg transition-all",children:[e.jsx("p",{className:["capitalize",i(t)?"font-bold":""].join(" "),children:t.name}),i(t)&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(R,{className:"flex items-center pointer-events-none",children:[e.jsx("span",{className:"text-xs",children:"Caught"}),e.jsx("div",{className:"w-6 h-6 bg-white/90 rounded-full p-1 shadow-sm",children:e.jsx("img",{src:G,alt:"tick-icon"})})]})}),e.jsx("div",{className:"mt-6 flex justify-between w-full",children:e.jsx(R,{className:"px-3 py-1 w-full rounded-lg border text-sm",onClick:()=>o(t),children:"View"})})]},t.name))}),s?.count>n?.limit&&e.jsx(T,{className:"react-paginate",breakLabel:"...",forcePage:n?.offset/n?.limit,onPageChange:r,pageRangeDisplayed:3,previousLabel:"←",nextLabel:"→",pageCount:Math.ceil(s?.count/n?.limit)??0,renderOnZeroPageCount:null})]})};function xe({}){return[{title:"Pokemon Go App"},{name:"description",content:"Welcome to Pokémon Go!"}]}const ge=U(function(){const[o,n]=a.useState({limit:12,offset:0}),{loading:r,error:i,data:t,API:d}=H(),[f,j]=I(),c=async({selected:p})=>{const l=p*o.limit;await d.getPokemons({...o,offset:l}),i||n(h=>({...h,offset:l}))};return a.useEffect(()=>{let p;if(d.getPokemons(o),!f.pageLoaded){p=setTimeout(()=>{j(A.pageLoaded,!0)},2500);return}return()=>{clearTimeout(p)}},[]),f.pageLoaded?e.jsx(K,{loading:r,error:!!i,children:e.jsx(ae,{pokemons:t,params:o,onPaginate:c})}):e.jsx(Y,{})});export{ge as default,xe as meta};
