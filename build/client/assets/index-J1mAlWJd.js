import{a as r,p as e,v as k,w as D}from"./chunk-4WY6JWTD-C6HYQV7D.js";import{u as v,l as b}from"./LocalStore-CoLjZkaN.js";import{B as x,P,a as G,H as T}from"./HomeLayout-CblElA1v.js";import"./index-DcSJJRlm.js";import{m as N}from"./proxy-ChNXyaPz.js";import{M as V}from"./index-zNUrgq7u.js";const B="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%2012H21M13%208H21M13%2016H21M6%207V17M6%207L3%2010M6%207L9%2010'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",E="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%2012H21M13%208H21M13%2016H21M6%207V17M6%2017L3%2014M6%2017L9%2014'%20stroke='%23000000'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",R="/assets/no-caught-pokemons-CD8occn7.gif",O=({note:o,onSubmit:i})=>{const[m,a]=r.useState("");return r.useEffect(()=>{o&&a(o)},[]),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"add-note",className:"block font-bold",children:"Add Note:"}),e.jsx("textarea",{"aria-label":"Pokemon Note",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors duration-200 shadow-sm text-sm",id:"add-note !outline-none !min-h-[500px]",value:m,style:{minHeight:"300px"},onChange:c=>a(c.target.value)}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{"aria-label":"Add Note",className:"bg-white border text-slate-700 !text-xs !h-8",onClick:()=>i(m),children:"Add Note"}),e.jsx(x,{className:"!bg-red-400 !text-white text-slate-700 !text-xs !h-8",onClick:()=>i(""),children:"Clear Note & Close"})]})]})},U=({sortBy:o,sortDirection:i,sortedPokemons:m,pokemonSelected:a,updatePokemonSelections:c,setShowModal:h,setSelectedPokemonItem:u})=>{const g=k();return e.jsx(N.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",layoutDependency:o+i,children:m()?.map(l=>e.jsxs(N.div,{layout:!0,transition:{layout:{duration:.3,ease:"easeInOut"}},className:["border border-slate-300 rounded-lg p-4 flex flex-col justify-between items-center hover:shadow-lg transition-all",a(l)?"!border-red-400":""].join(" "),children:[e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx("h5",{className:"font-bold capitalize text-sm",children:l.name}),e.jsx(x,{className:["inline-block !px-4 !py-2 !h-8 !rounded-lg !text-xs font-semibold capitalize border",a(l)?"!border-red-400 !text-red-400":""].join(" "),onClick:()=>c(l),children:a(l)?"Unselect":"Select"})]}),e.jsx("div",{className:"w-44 h-44 sm:w-56 sm:h-56",children:e.jsx("img",{src:l?.sprites?.other?.["official-artwork"]?.front_default,alt:"artwork",className:"max-w-full max-h-full object-contain",loading:"lazy",onError:f=>{f.currentTarget.src=P}})}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-bold",children:"Date added"}),e.jsx("span",{children:l?.timestamp})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-bold",children:"Height"}),e.jsxs("span",{children:[l?.height*10,"cm"]})]}),e.jsxs("div",{className:"text-xs flex flex-col",children:[e.jsx("p",{className:"font-bold",children:"Weight"}),e.jsxs("span",{className:"self-end",children:[l?.weight/10,"kg"]})]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-bold",children:"Note"}),e.jsx("span",{children:l?.note||"..."})]})]}),e.jsxs("div",{className:"flex justify-between gap-2 w-full",children:[e.jsx(x,{className:"bg-white mt-2 border border-green-400 !text-green-700 !text-xs !py-1 !h-8",onClick:()=>{h(f=>!f),u(l)},children:"Add Note"}),e.jsx(x,{"aria-label":"View Pokémon",className:"bg-white mt-2 border border-green-400 !text-green-700 !text-xs !py-1 !h-8",onClick:()=>g(G(String(l.id))),children:"View"})]})]},l.id))})},A=[{label:"Name",value:"name"},{label:"Height",value:"height"},{label:"Weight",value:"weight"},{label:"Timestamp",value:"timestamp"}],z=({updateSorting:o,setSortDirection:i,sortDirection:m,selectedPokemons:a,releaseSelectedPokemons:c})=>{const[h]=v();return e.jsx("div",{className:"flex justify-between items-center mb-4",children:!!h?.caughtPokemons?.length&&e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("h4",{className:"font-bold text-lg flex items-center gap-1",children:[e.jsx("span",{children:"My Pokédex"}),e.jsx("div",{className:"w-8 animate-spin",children:e.jsx("img",{src:P,alt:"pikachu-eating",className:"w-full"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("select",{className:"w-full h-full appearance-none p-2 pr-10 border border-gray-300 rounded-lg shadow-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 cursor-pointer text-xs",onChange:o,children:[e.jsx("option",{value:"",children:"Sort"}),A.map(({label:u,value:g})=>e.jsx("option",{value:g,children:u}))]}),e.jsx(x,{title:"Sort up/down","aria-label":"sort up/down",className:"border border-gray-300",onClick:()=>i(u=>u==="asc"?"desc":"asc"),children:e.jsx("div",{className:"w-6",children:e.jsx("img",{src:m==="asc"?B:E,alt:"sort-icon",className:"w-full"})})}),!!a.length&&e.jsxs(x,{className:"border border-green-500 text-green-800! font-bold! text-xs hover:brightness-95 whitespace-nowrap",onClick:c,children:["Release ",a.length," selected pokémon",a.length>1?"s":""]})]})]})})},K=()=>{const[o,i]=v(),m=k(),[a,c]=r.useState([]),[h,u]=r.useState("asc"),[g,l]=r.useState(""),[f,w]=r.useState(!1),[p,C]=r.useState({}),y=n=>{const s=o?.caughtPokemons?.findIndex(t=>t.id===p.id);if(s!==-1){let t=[...o?.caughtPokemons??[]];t.splice(s,1,{...p,note:n}),i(b.caughtPokemons,t)}w(!1)};function j(n){const s=new Date(n);if(isNaN(s.getTime()))throw new Error("Invalid date format");return s.getTime()}const S=r.useCallback(()=>{const n=(s,t)=>h==="asc"?s<t?-1:1:s<t?1:-1;switch(g){case"name":return[...o?.caughtPokemons??[]].sort((s,t)=>n(s.name?.toLowerCase(),t?.name?.toLowerCase()));case"height":return[...o?.caughtPokemons??[]].sort((s,t)=>n(s.height,t?.height));case"weight":return[...o?.caughtPokemons??[]].sort((s,t)=>n(s.weight,t?.weight));case"timestamp":return[...o?.caughtPokemons??[]].sort((s,t)=>n(j(s.timestamp),j(t?.timestamp)));default:return[...o?.caughtPokemons??[]].sort((s,t)=>n(s.name?.toLowerCase(),t?.name?.toLowerCase()))}},[g,h,o?.caughtPokemons]),M=n=>{l(n.target.value)},I=r.useCallback(n=>!!a?.find(s=>s.id===n.id),[o?.caughtPokemons,a]),H=r.useCallback(n=>{if(a.findIndex(d=>d.id===n.id)===-1){let d=[...a];d=[...d,n],c(d);return}let t=[...a];t=t?.filter(d=>d.id!==n.id),c(t)},[o?.caughtPokemons,a]),L=r.useCallback(()=>{const n=o?.caughtPokemons?.filter(s=>!a.map(d=>d.id).includes(s.id));i(b.caughtPokemons,n),c([])},[o?.caughtPokemons,a]);return e.jsxs(T,{children:[e.jsxs(x,{className:"back-btn mb-6",onClick:()=>m(-1),children:["<"," Back"]}),e.jsx(z,{updateSorting:M,setSortDirection:u,sortDirection:h,selectedPokemons:a,releaseSelectedPokemons:L}),e.jsx("div",{children:o?.caughtPokemons?.length?e.jsx(U,{sortBy:g,sortDirection:h,sortedPokemons:S,pokemonSelected:I,updatePokemonSelections:H,setShowModal:w,setSelectedPokemonItem:C}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-100 md:w-150 mb-6",children:e.jsx("img",{src:R,alt:"no caught pokemons",className:"max-w-full max-h-full object-contain",loading:"lazy"})}),e.jsx("h4",{className:"font-bold text-sm md:text-lg",children:"GOODLUCK CATCHING ME!"})]})}),f&&e.jsx(V,{onClose:()=>w(!1),children:e.jsx(O,{note:p?.note,onSubmit:y})})]})},X=D(K);export{X as default};
